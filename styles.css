:root{
  --bg:#fafbfc;
  --panel:#ffffff;
  --text:#2d3436;
  --muted:#64748b;
  --border:#e2e8f0;
  --shadow:0 2px 6px rgba(0,0,0,.06);
  --radius:12px;
  --brand:#60a5fa;
  --brand-2:#93c5fd;
  --danger:#fb7185;

  /* Pastels for tags + tints */
  --accent-blue:#93c5fd;
  --accent-green:#a7f3d0;
  --accent-lilac:#c4b5fd;
  --accent-rose:#fecdd3;
  --accent-yellow:#fde68a;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
  color:var(--text);
  background:var(--bg);
  line-height:1.6;
}

/* Top bar (no search) */
.topbar{
  position:sticky;top:0;z-index:20;
  background:var(--bg);
  border-bottom:1px solid var(--border);
  padding:10px 12px;
}
.topbar-row{display:flex;align-items:center;gap:10px}
.topbar-title{margin:0;font-size:1.05rem}
.topbar-spacer{flex:1}
.topbar select{
  padding:10px 12px;border:1px solid var(--border);
  border-radius:10px;background:#fff;color:var(--text);
}

/* Views (single scroll) */
.view{padding:12px;max-width:760px;margin:0 auto}
.section-title{margin:0 0 8px 0;font-size:1.05rem}
.results-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.muted{color:var(--muted);font-size:.9rem}

/* Cards: one per line, minimalist with pastel tint */
.cards-stack{
  display:flex;flex-direction:column;gap:12px;
}
.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
}
.card.item{display:flex;flex-direction:column;gap:10px}
.row-top{display:flex;align-items:center;gap:10px}
.checkbox{width:20px;height:20px;accent-color:var(--accent-green)}
.badge{
  display:inline-flex;align-items:center;padding:4px 10px;border-radius:999px;
  font-size:.78rem;font-weight:500;background:#eef2ff;color:#3730a3;
  border:1px solid var(--border);
}
.item-title{margin:0;font-weight:600;font-size:1.02rem}
.meta{font-size:.92rem}
.meta small{color:var(--muted)}


/* Pastel tint variants */
.tint-blue{border-left:4px solid var(--accent-blue);background:linear-gradient(0deg, rgba(147,197,253,0.08), transparent)}
.tint-green{border-left:4px solid var(--accent-green);background:linear-gradient(0deg, rgba(167,243,208,0.10), transparent)}
.tint-lilac{border-left:4px solid var(--accent-lilac);background:linear-gradient(0deg, rgba(196,181,253,0.10), transparent)}
.tint-rose{border-left:4px solid var(--accent-rose);background:linear-gradient(0deg, rgba(254,205,211,0.10), transparent)}
.tint-yellow{border-left:4px solid var(--accent-yellow);background:linear-gradient(0deg, rgba(253,230,138,0.10), transparent)}

/* Price row with inline counter and actions */
.price-row{
  display:flex;align-items:center;justify-content:space-between;
  border-top:1px solid var(--border);padding-top:6px;gap:12px;
}
.price-qty{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
}
.price{font-weight:600;color:var(--brand)}
.qty{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid var(--border);border-radius:10px;padding:4px 8px;background:#fff;
}
.qty button{
  width:28px;height:28px;border-radius:8px;border:1px solid var(--border);background:#f8fafc;cursor:pointer;
  font-size:16px;line-height:0;display:flex;align-items:center;justify-content:center;
}
.qty span{min-width:20px;text-align:center;font-weight:600}
.actions{display:flex;gap:8px}

/* Buttons */
.btn{
  cursor:pointer;border:none;border-radius:8px;
  padding:8px 12px;background:var(--brand);color:#fff;font-size:.92rem;
}
.btn.secondary{background:#f1f5f9;color:var(--text);border:1px solid var(--border)}
.btn.ghost{background:#fff;border:1px solid var(--border);color:var(--text)}
/* Delete now same as Edit (blue) */
.btn.danger{background:var(--brand);color:#fff}

/* Edit mode (keep same layout & frame) */
.card.editing {
  display: flex;
  flex-direction: column;
  gap: 10px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  background: inherit; /* keep pastel tint */
  animation: none;
  padding: 14px; /* same as normal card */
}

/* Keep the tint border visible */
.card.editing.tint-blue,
.card.editing.tint-green,
.card.editing.tint-lilac,
.card.editing.tint-rose,
.card.editing.tint-yellow {
  border-left-width: 4px;
}

/* Fields inside the edit mode */
.card.editing form {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.card.editing input,
.card.editing textarea {
  border-radius: 8px;
  border: 1px solid var(--border);
  background: #fff;
  font-size: .95rem;
  color: var(--text);
  resize: vertical;
}

.card.editing textarea {
  min-height: 50px;
}

/* FAB */
.fab{
  position:fixed;left:50%;transform:translateX(-50%);
  bottom:calc(90px + env(safe-area-inset-bottom));
  width:58px;height:58px;border-radius:999px;background:var(--brand);color:#fff;border:none;
  font-size:28px;line-height:0;display:flex;align-items:center;justify-content:center;
  box-shadow:0 8px 22px rgba(96,165,250,.45);z-index:30;
  transition:transform .2s ease,box-shadow .25s ease,background .2s ease;
}
.fab:hover{background:var(--brand-2);transform:translateX(-50%) scale(1.08);box-shadow:0 10px 26px rgba(96,165,250,0.4)}
.fab:active{transform:translateX(-50%) scale(0.95);box-shadow:0 4px 10px rgba(96,165,250,0.3)}
.fab::after{content:"";position:absolute;inset:0;border-radius:50%;background:rgba(255,255,255,0.3);opacity:0;transition:opacity .25s ease}
.fab:active::after{opacity:1;transition:opacity .1s ease}

/* Modal */
.modal{position:fixed;inset:0;display:none;z-index:40}
.modal.open{display:block}
.modal-backdrop{position:absolute;inset:0;background:rgba(15,23,42,.3)}
.modal-card{
  position:absolute;left:50%;transform:translateX(-50%);
  bottom:0;width:100%;max-width:560px;background:var(--panel);border:1px solid var(--border);
  border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -12px 30px rgba(0,0,0,.15);
  padding:12px;
}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:4px 6px 8px}
.form-col{display:flex;flex-direction:column;gap:10px}
.form-col label{display:flex;flex-direction:column;color:var(--muted);font-size:.92rem}
.form-col input,.form-col textarea{
  padding:10px;border:1px solid var(--border);border-radius:8px;background:#fff;color:var(--text);font-size:.95rem;resize:vertical;
}
.modal-actions{display:flex;gap:8px}

/* Tags */
.tags{display:flex;flex-wrap:wrap;gap:6px}
.tag{display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border-radius:999px;font-size:.78rem;border:1px solid var(--border)}
.tag-yasaman{background:var(--accent-rose);color:#9b1c1c}
.tag-jay{background:var(--accent-blue);color:#1e3a8a}
.tag-mom{background:#ffe4ea;color:#9d174d}
.tag-father{background:var(--accent-lilac);color:#512da8}
.tag-nas{background:var(--accent-yellow);color:#92400e}

/* Budget widget */
.budget{
  position:fixed;right:12px;bottom:12px;z-index:35;
  background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);
  min-width:230px;
}
.budget-toggle{
  position:absolute;top:-12px;right:10px;width:28px;height:28px;border-radius:999px;border:1px solid var(--border);
  background:var(--panel);color:var(--text);cursor:pointer;box-shadow:var(--shadow);
}
.budget-body{padding:12px;display:flex;flex-direction:column;gap:8px}
.budget-row{display:flex;align-items:center;justify-content:space-between}
.progress{width:100%;height:8px;border-radius:6px;background:#f1f5f9;border:1px solid var(--border);overflow:hidden}
.progress-bar{height:100%;background:linear-gradient(90deg,var(--brand),var(--brand-2));width:0%;transition:width .3s ease}
.budget.collapsed .budget-body{display:none}
.budget.collapsed .budget-toggle{transform:rotate(180deg)}

/* Footer */
.site-footer{text-align:center;color:var(--muted);font-size:.9rem;padding:16px 12px 28px}

/* Mobile */
@media (max-width:900px){
  .view{padding:10px}
  .card{border-radius:14px}
  .checkbox{width:24px;height:24px}
  .btn{width:100%;font-size:1rem;padding:12px 14px}
  .btn.small{width:auto;font-size:.9rem;padding:10px 12px}
  .actions .btn{width:auto}
}
.hidden{display:none}

/* --- Force same frame when editing (override conflicts) --- */
.card.item.editing {
  border-left: 4px solid currentColor !important;
  background: inherit !important;
  box-shadow: var(--shadow) !important;
  border-color: var(--border) !important;
  transform: none !important;
  animation: none !important;
}

.card.item.editing form {
  background: transparent;
  margin: 0;
  padding: 0;
}

/* Keep pastel tint visible while editing */
.card.item.editing.tint-blue { border-left-color: var(--accent-blue) !important; }
.card.item.editing.tint-green { border-left-color: var(--accent-green) !important; }
.card.item.editing.tint-lilac { border-left-color: var(--accent-lilac) !important; }
.card.item.editing.tint-rose { border-left-color: var(--accent-rose) !important; }
.card.item.editing.tint-yellow { border-left-color: var(--accent-yellow) !important; }

/* Text inputs integrate smoothly into the same frame */
.card.item.editing input,
.card.item.editing textarea {
  border: 1px solid var(--border);
  border-radius: 8px;
  background: rgba(255,255,255,0.8);
  width: 100%;
  font-size: 0.95rem;
  padding: 8px 10px;
  color: var(--text);
  resize: vertical;
}

.card.item.editing textarea {
  min-height: 60px;
}
